Fact documents_added Identified by "applicationresponse", "exportcustomsdeclaration", "exportcustomsdeclaration_two".
Fact applicationresponse_companyid Identified by Int.
Fact applicationresponse_description Identified by "Approved", "Rejected".
Fact applicationresponse_id Identified by "A8596", "A8597", "A8598", "A8599", "A8600", "DK003100", "DK003101", "DK003102", "D00001"
Fact applicationresponse_identificationcode Identified by String.
Fact applicationresponse_issuedate Identified by String.
Fact applicationresponse_postalzone Identified by Int.
Fact applicationresponse_responsecode Identified by 0, 1.
Fact exportcustomsdeclaration_companyid Identified by Int.
Fact exportcustomsdeclaration_id Identified by "A8596", "A8597", "A8598", "A8599", "A8600", "DK003100", "DK003101", "DK003102".
Fact exportcustomsdeclaration_identificationcode Identified by String.
Fact exportcustomsdeclaration_issuedate Identified by String.
Fact exportcustomsdeclaration_netweightmeasure Identified by String.
Fact exportcustomsdeclaration_postalzone Identified by Int.
Fact exportcustomsdeclaration_totalinvoiceamount Identified by String.
Fact exportcustomsdeclaration_websiteuri Identified by String.
Fact exportcustomsdeclaration_two_companyid Identified by Int.
Fact exportcustomsdeclaration_two_id Identified by "A8596", "A8597", "A8598", "A8599", "A8600", "DK003100", "DK003101", "DK003102", "S234664".
Fact exportcustomsdeclaration_two_identificationcode Identified by String.
Fact exportcustomsdeclaration_two_issuedate Identified by String.
Fact exportcustomsdeclaration_two_netweightmeasure Identified by String.
Fact exportcustomsdeclaration_two_postalzone Identified by Int.
Fact exportcustomsdeclaration_two_totalinvoiceamount Identified by String.
Fact exportcustomsdeclaration_two_websiteuri Identified by String.
Fact applicationresponse_documentresponse_documentreference Identified by  applicationresponse_id .
Fact applicationresponse_documentresponse_response Identified by  applicationresponse_description * applicationresponse_responsecode .
Fact applicationresponse_receiverparty_partyidentification Identified by  applicationresponse_id .
Fact applicationresponse_receiverparty_partylegalentity Identified by  applicationresponse_companyid .
Fact applicationresponse_receiverparty_postaladdress Identified by  applicationresponse_postalzone .
Fact applicationresponse_receiverparty_postaladdress_country Identified by  applicationresponse_identificationcode .
Fact applicationresponse_senderparty_partyidentification Identified by  applicationresponse_id .
Fact applicationresponse_senderparty_postaladdress Identified by  applicationresponse_postalzone .
Fact applicationresponse_senderparty_postaladdress_country Identified by  applicationresponse_identificationcode .
Fact exportcustomsdeclaration_customsdeclaration Identified by  exportcustomsdeclaration_id .
Fact exportcustomsdeclaration_customsdeclaration_additionaldocumentreference Identified by  exportcustomsdeclaration_id .
Fact exportcustomsdeclaration_customsdeclaration_consigneeparty_partyidentification Identified by  exportcustomsdeclaration_id .
Fact exportcustomsdeclaration_customsdeclaration_consigneeparty_partylegalentity Identified by  exportcustomsdeclaration_companyid .
Fact exportcustomsdeclaration_customsdeclaration_consigneeparty_postaladdress Identified by  exportcustomsdeclaration_postalzone .
Fact exportcustomsdeclaration_customsdeclaration_consigneeparty_postaladdress_country Identified by  exportcustomsdeclaration_identificationcode .
Fact exportcustomsdeclaration_customsdeclaration_consignorparty_partyidentification Identified by  exportcustomsdeclaration_id .
Fact exportcustomsdeclaration_customsdeclaration_consignorparty_partylegalentity Identified by  exportcustomsdeclaration_companyid .
Fact exportcustomsdeclaration_customsdeclaration_consignorparty_postaladdress Identified by  exportcustomsdeclaration_postalzone .
Fact exportcustomsdeclaration_customsdeclaration_consignorparty_postaladdress_country Identified by  exportcustomsdeclaration_identificationcode .
Fact exportcustomsdeclaration_customsdeclaration_customsparty_partyidentification Identified by  exportcustomsdeclaration_id .
Fact exportcustomsdeclaration_customsdeclaration_customsparty_postaladdress Identified by  exportcustomsdeclaration_postalzone .
Fact exportcustomsdeclaration_customsdeclaration_customsparty_postaladdress_country Identified by  exportcustomsdeclaration_identificationcode .
Fact exportcustomsdeclaration_customsdeclaration_shipment Identified by  exportcustomsdeclaration_id .
Fact exportcustomsdeclaration_customsdeclaration_shipment_consignment Identified by  exportcustomsdeclaration_id * exportcustomsdeclaration_netweightmeasure * exportcustomsdeclaration_totalinvoiceamount .
Fact exportcustomsdeclaration_exporterparty Identified by  exportcustomsdeclaration_websiteuri .
Fact exportcustomsdeclaration_exporterparty_partyidentification Identified by  exportcustomsdeclaration_id .
Fact exportcustomsdeclaration_exporterparty_partylegalentity Identified by  exportcustomsdeclaration_companyid .
Fact exportcustomsdeclaration_exporterparty_postaladdress Identified by  exportcustomsdeclaration_postalzone .
Fact exportcustomsdeclaration_exporterparty_postaladdress_country Identified by  exportcustomsdeclaration_identificationcode .
Fact exportcustomsdeclaration_two_customsdeclaration Identified by  exportcustomsdeclaration_two_id .
Fact exportcustomsdeclaration_two_customsdeclaration_additionaldocumentreference Identified by  exportcustomsdeclaration_two_id .
Fact exportcustomsdeclaration_two_customsdeclaration_consigneeparty_partyidentification Identified by  exportcustomsdeclaration_two_id .
Fact exportcustomsdeclaration_two_customsdeclaration_consigneeparty_partylegalentity Identified by  exportcustomsdeclaration_two_companyid .
Fact exportcustomsdeclaration_two_customsdeclaration_consigneeparty_postaladdress Identified by  exportcustomsdeclaration_two_postalzone .
Fact exportcustomsdeclaration_two_customsdeclaration_consigneeparty_postaladdress_country Identified by  exportcustomsdeclaration_two_identificationcode .
Fact exportcustomsdeclaration_two_customsdeclaration_consignorparty_partyidentification Identified by  exportcustomsdeclaration_two_id .
Fact exportcustomsdeclaration_two_customsdeclaration_consignorparty_partylegalentity Identified by  exportcustomsdeclaration_two_companyid .
Fact exportcustomsdeclaration_two_customsdeclaration_consignorparty_postaladdress Identified by  exportcustomsdeclaration_two_postalzone .
Fact exportcustomsdeclaration_two_customsdeclaration_consignorparty_postaladdress_country Identified by  exportcustomsdeclaration_two_identificationcode .
Fact exportcustomsdeclaration_two_customsdeclaration_customsparty_partyidentification Identified by  exportcustomsdeclaration_two_id .
Fact exportcustomsdeclaration_two_customsdeclaration_customsparty_postaladdress Identified by  exportcustomsdeclaration_two_postalzone .
Fact exportcustomsdeclaration_two_customsdeclaration_customsparty_postaladdress_country Identified by  exportcustomsdeclaration_two_identificationcode .
Fact exportcustomsdeclaration_two_customsdeclaration_shipment Identified by  exportcustomsdeclaration_two_id .
Fact exportcustomsdeclaration_two_customsdeclaration_shipment_consignment Identified by  exportcustomsdeclaration_two_id * exportcustomsdeclaration_two_netweightmeasure * exportcustomsdeclaration_two_totalinvoiceamount .
Fact exportcustomsdeclaration_two_exporterparty Identified by  exportcustomsdeclaration_two_websiteuri .
Fact exportcustomsdeclaration_two_exporterparty_partyidentification Identified by  exportcustomsdeclaration_two_id .
Fact exportcustomsdeclaration_two_exporterparty_partylegalentity Identified by  exportcustomsdeclaration_two_companyid .
Fact exportcustomsdeclaration_two_exporterparty_postaladdress Identified by  exportcustomsdeclaration_two_postalzone .
Fact exportcustomsdeclaration_two_exporterparty_postaladdress_country Identified by  exportcustomsdeclaration_two_identificationcode .
Fact exportcustomsdeclaration_two_signature Identified by  exportcustomsdeclaration_two_id .
Fact exportcustomsdeclaration_two_signature_signatoryparty_partyidentification Identified by  exportcustomsdeclaration_two_id .
Fact exportcustomsdeclaration_two_signature_signatoryparty_postaladdress Identified by  exportcustomsdeclaration_two_postalzone .
Fact exportcustomsdeclaration_two_signature_signatoryparty_postaladdress_country Identified by  exportcustomsdeclaration_two_identificationcode .

Fact eu-country
    Identified by "AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT",
    "LU","MT","NL","PL","PT","RO","SK","SI","ES","SE"
    Derived from
    eu-country(exportcustomsdeclaration_exporterparty_postaladdress_country.exportcustomsdeclaration_identificationcode).

Bool customs_declaration_complete.

Act receive_reject
    Actor exportcustomsdeclaration_exporterparty_partyidentification
    Recipient applicationresponse_documentresponse_response
    Conditioned by documents_added("applicationresponse") && applicationresponse_documentresponse_response.applicationresponse_description == "Rejected" && applicationresponse_documentresponse_response.applicationresponse_responsecode == 0 && applicationresponse_receiverparty_partyidentification.applicationresponse_id == exportcustomsdeclaration_exporterparty_partyidentification.exportcustomsdeclaration_id
    Creates customs_declaration_complete.

Act send_reject
    Actor exportcustomsdeclaration_customsdeclaration_customsparty_partyidentification
    Recipient exportcustomsdeclaration_exporterparty_partyidentification
    Conditioned by exportcustomsdeclaration_customsdeclaration_customsparty_partyidentification
    Creates receive_reject (exportcustomsdeclaration_exporterparty_partyidentification, applicationresponse_documentresponse_response) Where Holds exportcustomsdeclaration_exporterparty_partyidentification && Holds applicationresponse_documentresponse_response.

Act receive_export_customs_declaration
    Actor exportcustomsdeclaration_two_signature_signatoryparty_partyidentification
    Recipient exportcustomsdeclaration_two_exporterparty_partyidentification
    Conditioned by exportcustomsdeclaration_two_exporterparty_partyidentification && exportcustomsdeclaration_two_signature_signatoryparty_partyidentification.exportcustomsdeclaration_two_id == exportcustomsdeclaration_two_exporterparty_partyidentification.exportcustomsdeclaration_two_id
    Creates customs_declaration_complete.

Act apply_stamps_and_signature
    Actor exportcustomsdeclaration_two_customsdeclaration_customsparty_partyidentification
    Recipient exportcustomsdeclaration_two_exporterparty_partyidentification
    Conditioned by exportcustomsdeclaration_two_customsdeclaration_customsparty_partyidentification && exportcustomsdeclaration_two_exporterparty_partyidentification && exportcustomsdeclaration_customsdeclaration_customsparty_postaladdress_country.exportcustomsdeclaration_identificationcode == exportcustomsdeclaration_exporterparty_postaladdress_country.exportcustomsdeclaration_identificationcode && exportcustomsdeclaration_exporterparty_partylegalentity.exportcustomsdeclaration_companyid == exportcustomsdeclaration_customsdeclaration_consignorparty_partylegalentity.exportcustomsdeclaration_companyid && eu-country(exportcustomsdeclaration_exporterparty_postaladdress_country.exportcustomsdeclaration_identificationcode)
    Creates receive_export_customs_declaration (exportcustomsdeclaration_two_signature_signatoryparty_partyidentification, exportcustomsdeclaration_two_exporterparty_partyidentification) Where Holds exportcustomsdeclaration_two_signature_signatoryparty_partyidentification && Holds exportcustomsdeclaration_two_exporterparty_partyidentification.

Act validate_exporter_party_country_in_eu
    Actor exportcustomsdeclaration_customsdeclaration_customsparty_partyidentification
    Conditioned by exportcustomsdeclaration_customsdeclaration_customsparty_partyidentification && eu-country(exportcustomsdeclaration_exporterparty_postaladdress_country.exportcustomsdeclaration_identificationcode)
    Creates apply_stamps_and_signature (exportcustomsdeclaration_two_customsdeclaration_customsparty_partyidentification, exportcustomsdeclaration_two_exporterparty_partyidentification) Where Holds exportcustomsdeclaration_two_customsdeclaration_customsparty_partyidentification && Holds exportcustomsdeclaration_two_exporterparty_partyidentification, send_reject (exportcustomsdeclaration_customsdeclaration_customsparty_partyidentification, exportcustomsdeclaration_exporterparty_partyidentification) Where Holds exportcustomsdeclaration_customsdeclaration_customsparty_partyidentification && Holds exportcustomsdeclaration_exporterparty_partyidentification.

Act validate_customs_consigner_party_legal_entity
    Actor exportcustomsdeclaration_customsdeclaration_customsparty_partyidentification
    Conditioned by exportcustomsdeclaration_customsdeclaration_customsparty_partyidentification &&
    exportcustomsdeclaration_exporterparty_partylegalentity.exportcustomsdeclaration_companyid == exportcustomsdeclaration_customsdeclaration_consignorparty_partylegalentity.exportcustomsdeclaration_companyid
    Creates validate_exporter_party_country_in_eu (exportcustomsdeclaration_customsdeclaration_customsparty_partyidentification) Where Holds exportcustomsdeclaration_customsdeclaration_customsparty_partyidentification, send_reject (exportcustomsdeclaration_customsdeclaration_customsparty_partyidentification, exportcustomsdeclaration_exporterparty_partyidentification) Where Holds exportcustomsdeclaration_customsdeclaration_customsparty_partyidentification && Holds exportcustomsdeclaration_exporterparty_partyidentification.

Act validate_customs_consignee_country
    Actor exportcustomsdeclaration_customsdeclaration_customsparty_partyidentification
    Conditioned by exportcustomsdeclaration_customsdeclaration_customsparty_partyidentification && (exportcustomsdeclaration_customsdeclaration_customsparty_postaladdress_country.exportcustomsdeclaration_identificationcode == exportcustomsdeclaration_exporterparty_postaladdress_country.exportcustomsdeclaration_identificationcode)
    Creates validate_customs_consigner_party_legal_entity (exportcustomsdeclaration_customsdeclaration_customsparty_partyidentification) Where Holds exportcustomsdeclaration_customsdeclaration_customsparty_partyidentification, send_reject (exportcustomsdeclaration_customsdeclaration_customsparty_partyidentification, exportcustomsdeclaration_exporterparty_partyidentification) Where Holds exportcustomsdeclaration_customsdeclaration_customsparty_partyidentification && Holds exportcustomsdeclaration_exporterparty_partyidentification.

Act draft_export_customs_declaration
    Actor exportcustomsdeclaration_exporterparty_partyidentification
    Recipient exportcustomsdeclaration_customsdeclaration_customsparty_partyidentification
    Holds when True
    Conditioned by exportcustomsdeclaration_exporterparty_partyidentification != exportcustomsdeclaration_customsdeclaration_customsparty_partyidentification && exportcustomsdeclaration_exporterparty_partyidentification && exportcustomsdeclaration_customsdeclaration_customsparty_partyidentification && documents_added("exportcustomsdeclaration")
    Creates validate_customs_consignee_country (exportcustomsdeclaration_customsdeclaration_customsparty_partyidentification) Where Holds(exportcustomsdeclaration_customsdeclaration_customsparty_partyidentification).

